[
  {
    "keyword": "Funcionalidade",
    "name": "Integração - Mercado Pago",
    "line": 3,
    "id": "integração---mercado-pago",
    "tags": [],
    "uri": "mercado-pago.feature",
    "elements": [
      {
        "id": "integração---mercado-pago;cadastro-de-credenciais",
        "keyword": "Scenario",
        "line": 5,
        "name": "Cadastro de Credenciais",
        "tags": [],
        "type": "scenario",
        "steps": [
          {
            "arguments": [],
            "keyword": "Dado ",
            "line": 6,
            "name": "que tenho um usuário e um token da API Mercado Pago",
            "result": {
              "status": "passed",
              "duration": 29000000
            }
          },
          {
            "arguments": [],
            "keyword": "E ",
            "line": 7,
            "name": "o endereço do webhook da aplicação",
            "result": {
              "status": "passed",
              "duration": 1000000
            }
          },
          {
            "arguments": [],
            "keyword": "Quando ",
            "line": 8,
            "name": "realizar a chamada da API do Mercado Pago com minhas credenciais",
            "result": {
              "status": "failed",
              "duration": 28000000,
              "error_message": "CypressError: `cy.request()` failed on:\n\nhttp://localhost:8091/api/integracoes/mercadoPago/cadastroCredenciais\n\nThe response we received from your web server was:\n\n  > 500: Internal Server Error\n\nThis was considered a failure because the status code was not `2xx` or `3xx`.\n\nIf you do not want status codes to cause failures pass the option: `failOnStatusCode: false`\n\n-----------------------------------------------------------\n\nThe request we sent was:\n\nMethod: POST\nURL: http://localhost:8091/api/integracoes/mercadoPago/cadastroCredenciais\nHeaders: {\n  \"Connection\": \"keep-alive\",\n  \"user-agent\": \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36\",\n  \"accept\": \"*/*\",\n  \"accept-encoding\": \"gzip, deflate\",\n  \"content-type\": \"application/json\",\n  \"content-length\": 187\n}\nBody: {\"nome\":\"MERCADO_PAGO\",\"token\":\"APP_USR-3700555180154211-072119-f935351971829e8bb828baac793e87eb-1910140297\",\"usuario\":\"1910140297\",\"webHook\":\"https://2de6-186-220-40-123.ngrok-free.app\"}\n\n-----------------------------------------------------------\n\nThe response we got was:\n\nStatus: 500 - Internal Server Error\nHeaders: {\n  \"content-type\": \"application/json\",\n  \"transfer-encoding\": \"chunked\",\n  \"date\": \"Sun, 25 Aug 2024 22:15:26 GMT\",\n  \"connection\": \"close\"\n}\nBody: {\n  \"timestamp\": \"2024-08-25T19:15:26.439-03:00\",\n  \"status\": 500,\n  \"error\": \"Internal Server Error\",\n  \"message\": \"could not execute statement [ERROR: duplicate key value violates unique constraint \\\"uc_credenciaisacesso_usuario\\\"\\n  Detail: Key (usuario)=(1910140297) already exists.] [insert into credenciais_acesso (data_cadastro,nome,token,usuario,web_hook) values (?,?,?,?,?)]; SQL [insert into credenciais_acesso (data_cadastro,nome,token,usuario,web_hook) values (?,?,?,?,?)]; constraint [uc_credenciaisacesso_usuario]\",\n  \"path\": \"/api/integracoes/mercadoPago/cadastroCredenciais\"\n}\n\n    at <unknown> (http://localhost:8091/__cypress/runner/cypress_runner.js:133185:72)\n    at tryCatcher (http://localhost:8091/__cypress/runner/cypress_runner.js:1807:23)\n    at Promise._settlePromiseFromHandler (http://localhost:8091/__cypress/runner/cypress_runner.js:1519:31)\n    at Promise._settlePromise (http://localhost:8091/__cypress/runner/cypress_runner.js:1576:18)\n    at Promise._settlePromise0 (http://localhost:8091/__cypress/runner/cypress_runner.js:1621:10)\n    at Promise._settlePromises (http://localhost:8091/__cypress/runner/cypress_runner.js:1701:18)\n    at <unknown> (http://localhost:8091/__cypress/runner/cypress_runner.js:2392:25)\nFrom previous event:\n    at Promise.longStackTracesCaptureStackTrace [as _captureStackTrace] (http://localhost:8091/__cypress/runner/cypress_runner.js:3486:19)\n    at Promise._then (http://localhost:8091/__cypress/runner/cypress_runner.js:1239:17)\n    at Promise._passThrough (http://localhost:8091/__cypress/runner/cypress_runner.js:4110:17)\n    at Promise.lastly.Promise.finally (http://localhost:8091/__cypress/runner/cypress_runner.js:4119:17)\n    at Object.onRunnableRun (http://localhost:8091/__cypress/runner/cypress_runner.js:163180:53)\n    at $Cypress.action (http://localhost:8091/__cypress/runner/cypress_runner.js:41458:28)\n    at Runnable.run (http://localhost:8091/__cypress/runner/cypress_runner.js:145768:13)\n    at next (http://localhost:8091/__cypress/runner/cypress_runner.js:155553:10)\n    at <unknown> (http://localhost:8091/__cypress/runner/cypress_runner.js:155597:5)\n    at timeslice (http://localhost:8091/__cypress/runner/cypress_runner.js:146108:27)\nFrom Your Spec Code:\n    at Context.eval (cypress/support/step-definitions/mercado-pago.cy.js:27:4)\n    at Context.resolveAndRunStepDefinition (node_modules/cypress-cucumber-preprocessor/lib/resolveStepDefinition.js:193:0)\n    at Context.eval (node_modules/cypress-cucumber-preprocessor/lib/createTestFromScenario.js:27:0)"
            }
          },
          {
            "arguments": [],
            "keyword": "Então ",
            "line": 9,
            "name": "o cadastro das credenciais deve ser realizado com sucesso",
            "result": {
              "status": "skipped"
            }
          }
        ]
      },
      {
        "id": "integração---mercado-pago;cadastro-da-loja",
        "keyword": "Scenario",
        "line": 11,
        "name": "Cadastro da Loja",
        "tags": [],
        "type": "scenario",
        "steps": [
          {
            "arguments": [],
            "keyword": "Dado ",
            "line": 12,
            "name": "que possuo minhas credenciais da API Mercado Pago cadastradas",
            "result": {
              "status": "passed",
              "duration": 42000000
            }
          },
          {
            "arguments": [],
            "keyword": "Quando ",
            "line": 13,
            "name": "realizar a chamada da API do Mercado Pago para cadastrar a loja",
            "result": {
              "status": "passed",
              "duration": 764000000
            }
          },
          {
            "arguments": [],
            "keyword": "Então ",
            "line": 14,
            "name": "o cadastro da loja deve ser realizado com sucesso",
            "result": {
              "status": "passed",
              "duration": 14000000
            }
          },
          {
            "arguments": [],
            "keyword": "E ",
            "line": 15,
            "name": "devo receber a identificação da loja",
            "result": {
              "status": "passed",
              "duration": 6000000
            }
          }
        ]
      },
      {
        "id": "integração---mercado-pago;cadastro-do-caixa",
        "keyword": "Scenario",
        "line": 17,
        "name": "Cadastro do Caixa",
        "tags": [],
        "type": "scenario",
        "steps": [
          {
            "arguments": [],
            "keyword": "Dado ",
            "line": 18,
            "name": "que possuo uma loja cadastrada na API Mercado Pago",
            "result": {
              "status": "passed",
              "duration": 35000000
            }
          },
          {
            "arguments": [],
            "keyword": "Quando ",
            "line": 19,
            "name": "realizar a chamada da API do Mercado Pago para cadastrar um caixa",
            "result": {
              "status": "failed",
              "error_message": "CypressError: `cy.request()` failed on:\n\nhttp://localhost:8091/api/integracoes/mercadoPago/cadastrarCaixaLojaMercadoLivre\n\nThe response we received from your web server was:\n\n  > 500: Internal Server Error\n\nThis was considered a failure because the status code was not `2xx` or `3xx`.\n\nIf you do not want status codes to cause failures pass the option: `failOnStatusCode: false`\n\n-----------------------------------------------------------\n\nThe request we sent was:\n\nMethod: POST\nURL: http://localhost:8091/api/integracoes/mercadoPago/cadastrarCaixaLojaMercadoLivre\nHeaders: {\n  \"Connection\": \"keep-alive\",\n  \"user-agent\": \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36\",\n  \"accept\": \"*/*\",\n  \"accept-encoding\": \"gzip, deflate\",\n  \"content-type\": \"application/json\",\n  \"content-length\": 145\n}\nBody: {\"category\":null,\"external_id\":\"TECHCAIXA314\",\"external_store_id\":\"TECHLOJA493\",\"fixed_amount\":true,\"name\":\"Caixa filial SP\",\"store_id\":62796729}\n\n-----------------------------------------------------------\n\nThe response we got was:\n\nStatus: 500 - Internal Server Error\nHeaders: {\n  \"content-type\": \"application/json\",\n  \"transfer-encoding\": \"chunked\",\n  \"date\": \"Sun, 25 Aug 2024 22:15:27 GMT\",\n  \"connection\": \"close\"\n}\nBody: {\n  \"timestamp\": \"2024-08-25T19:15:27.548-03:00\",\n  \"status\": 500,\n  \"error\": \"Internal Server Error\",\n  \"message\": \"400 Bad Request: \\\"{\\\"error\\\":\\\"non_existent_external_store_id\\\",\\\"message\\\":\\\"External store id does not refer any store\\\",\\\"status\\\":400,\\\"causes\\\":[]}\\\"\",\n  \"path\": \"/api/integracoes/mercadoPago/cadastrarCaixaLojaMercadoLivre\"\n}\n\n    at <unknown> (http://localhost:8091/__cypress/runner/cypress_runner.js:133185:72)\n    at tryCatcher (http://localhost:8091/__cypress/runner/cypress_runner.js:1807:23)\n    at Promise._settlePromiseFromHandler (http://localhost:8091/__cypress/runner/cypress_runner.js:1519:31)\n    at Promise._settlePromise (http://localhost:8091/__cypress/runner/cypress_runner.js:1576:18)\n    at Promise._settlePromise0 (http://localhost:8091/__cypress/runner/cypress_runner.js:1621:10)\n    at Promise._settlePromises (http://localhost:8091/__cypress/runner/cypress_runner.js:1701:18)\n    at <unknown> (http://localhost:8091/__cypress/runner/cypress_runner.js:2392:25)\nFrom previous event:\n    at Promise.longStackTracesCaptureStackTrace [as _captureStackTrace] (http://localhost:8091/__cypress/runner/cypress_runner.js:3486:19)\n    at Promise._then (http://localhost:8091/__cypress/runner/cypress_runner.js:1239:17)\n    at Promise._passThrough (http://localhost:8091/__cypress/runner/cypress_runner.js:4110:17)\n    at Promise.lastly.Promise.finally (http://localhost:8091/__cypress/runner/cypress_runner.js:4119:17)\n    at Object.onRunnableRun (http://localhost:8091/__cypress/runner/cypress_runner.js:163180:53)\n    at $Cypress.action (http://localhost:8091/__cypress/runner/cypress_runner.js:41458:28)\n    at Runnable.run (http://localhost:8091/__cypress/runner/cypress_runner.js:145768:13)\n    at next (http://localhost:8091/__cypress/runner/cypress_runner.js:155553:10)\n    at <unknown> (http://localhost:8091/__cypress/runner/cypress_runner.js:155597:5)\n    at timeslice (http://localhost:8091/__cypress/runner/cypress_runner.js:146108:27)\nFrom Your Spec Code:\n    at Context.eval (cypress/support/step-definitions/mercado-pago.cy.js:105:5)"
            }
          },
          {
            "arguments": [],
            "keyword": "Então ",
            "line": 20,
            "name": "o cadastro do caixa deve ser realizado com sucesso",
            "result": {
              "status": "skipped"
            }
          },
          {
            "arguments": [],
            "keyword": "E ",
            "line": 21,
            "name": "devo receber a identificação do caixa",
            "result": {
              "status": "skipped"
            }
          }
        ]
      }
    ]
  }
]